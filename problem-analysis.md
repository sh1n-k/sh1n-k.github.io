---
layout: default
title: 문제 분석
nav_order: 2
---

# 문제 분석

이 과제의 핵심은 “메시지 발송 기능”을 특정 업체(기존 CloudMsg)에 강결합된 구조에서 분리해, **조직(Organization)별로 CloudMsg 또는 SendTalk을 선택**해 발송할 수 있도록 확장하는 것이다. 추가 요구사항으로, **서비스 운용자가 관리자 화면에서 조직의 발송 업체와 인증 정보를 설정/변경**할 수 있어야 한다.

## **배경과 요구사항 요약**

현재 시스템은 앱 푸시를 제외한 메시지(SMS, MMS/LMS, 알림톡)를 **CloudMsg**를 통해 발송한다. 신규로 **SendTalk** 업체 연동이 필요하며, 조직별 계약 상황에 따라 발송 업체를 선택할 수 있어야 한다.

요구사항을 기능 단위로 정리하면 다음과 같다.

핵심 요구
- **조직 단위 업체 선택**: 조직마다 CloudMsg 또는 SendTalk 중 하나를 사용한다.
- **기존 발송 API 호환 유지**: 발송 요청을 보내는 클라이언트는 변경 없이 동일 API를 사용한다(내부 구현만 변경).
- **비동기 결과 처리(Webhook)**: 발송 요청 시점과 결과 수신 시점이 분리되므로 이력/상태 관리를 갖춰야 한다.
- **관리자 설정 화면**: 운용자가 조직의 업체와 업체별 입력값(인증정보 등)을 설정/변경할 수 있어야 한다.
- **운영 실수 방지**: 잘못된 키 입력, 실수로 삭제/변경 등 사고를 줄이는 피드백/가드레일이 필요하다.

## **문제 분해(하위 질문) 구조**

설계를 바로 시작하지 않고, 먼저 “답이 갈리는 지점”을 질문으로 분해해 순서를 고정했다. 아래 순서는 실제 시스템 설계에서 자연스럽게 따라가게 되는 흐름이다.

1) 무엇을 가정해야 설계를 시작할 수 있는가?  
- 업체 선택 단위(조직 vs 메시지 타입)  
- 앱 푸시 범위 포함 여부  
- 결과 수신 방식(동기/비동기, Webhook 존재)  
- 인증정보 저장/권한/변경 주체

2) 두 업체의 API 차이가 설계에 주는 영향은 무엇인가?  
- 인증 방식 차이(서명/HMAC vs Bearer token 등)  
- 엔드포인트 구조(통합 vs 분리)  
- 필드명/포맷 차이(번호, 알림톡 템플릿/변수 등)  
- Webhook 페이로드/서명 검증 차이

3) 내부 구조는 어디를 추상화해야 하는가?  
- Provider(업체) 추상화 계층 필요 여부  
- 내부 도메인 모델을 superset으로 둘지, 최소 공통으로 둘지  
- Provider 선택(Resolver)과 캐싱 전략

4) 데이터는 어떻게 남겨야 운영이 가능한가?  
- 조직-업체 매핑 모델(활성화, 인증정보, 알림톡 설정 등)  
- 발송 이력에 “업체 코드/업체 메시지 ID/결과 수신 시각”을 저장해야 하는지  
- Webhook 유실 시 재동기화 전략이 필요한지

5) 운영자가 바꿀 수 있게 만들면 무엇이 달라지는가?  
- 관리 API 필요(조회/저장/삭제/연결 테스트)  
- 실수 방지 UX(연결 테스트, 확인 모달, 마스킹, 변경 이력, 동시 수정 충돌)  
- 변경 즉시 반영(캐시 무효화, 트랜잭션/락 경계)

## **필수 가정이 중요한 이유**

이 과제는 정보가 완전히 주어지지 않는 상황을 전제로 한다. 그래서 설계의 품질은 “모든 것을 맞추는 것”보다, **무엇이 확정이고 무엇이 가정인지 분리하고**, 가정이 바뀌면 설계를 어떻게 수정하는지를 보여주는 데서 갈린다.

예를 들어, “업체 선택 단위”가 조직 단위인지 메시지 타입 단위인지에 따라:
- 조직 단위: Resolver + 매핑 테이블로 비교적 단순
- 메시지 타입 단위: 매핑이 3배로 늘고(타입별), UI/검증/캐시/운영 복잡도가 급증

따라서 “가정 세트”를 먼저 만들고, 그 위에서 설계를 전개하는 방식이 합리적이다.

## **이 페이지의 산출물**

이 페이지의 목적은 상세 설계 자체가 아니라, 다음 페이지들(가정/설계/화면)이 자연스럽게 나오도록 “문제의 뼈대”를 고정하는 것이다.

- 다음 페이지에서 다룰 내용
  - API 비교 분석: 두 업체의 차이와 설계 영향
  - 가정 세트: 제출 가능한 전제 8항목
  - 서버 설계/작업 계획: 구현 순서, 결정 포인트, 리스크
  - 관리자 화면 설계: 설정 흐름과 실수 방지 UX
---
